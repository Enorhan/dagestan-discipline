@import "tailwindcss";

/* ============================================
   iOS/iPhone Layout Optimization
   ============================================ */

/* Fix iOS Safari viewport height issues */
html {
  height: 100%;
  height: 100dvh;
  height: -webkit-fill-available;
  margin: 0;
  padding: 0;
}

body {
  height: 100%;
  margin: 0;
  padding: 0;
  /* Prevent iOS rubber-banding/bounce effect */
  overscroll-behavior: none;
  overscroll-behavior-y: none;
  -webkit-overflow-scrolling: touch;
}

/* Prevent over-scrolling on all scroll containers */
[class*="overflow-y-auto"],
[class*="overflow-auto"] {
  overscroll-behavior-y: contain;
  scroll-padding-top: 0;
  scroll-padding-bottom: 0;
}

/* Eliminate 300ms tap delay on iOS */
* {
  touch-action: manipulation;
}

/* Prevent text size adjustment on orientation change */
html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* ============================================
   Dagestan Discipline - Dark Mode Only
   Brutal minimalism with blood red accent - AAA Quality
   ============================================ */
@theme inline {
  --color-background: #0a0a0a;
  --color-foreground: #fafafa;
  --color-card: #141414;
  --color-card-foreground: #fafafa;
  --color-popover: #141414;
  --color-popover-foreground: #fafafa;
  --color-primary: #8b0000;
  --color-primary-foreground: #fafafa;
  --color-secondary: #1a1a1a;
  --color-secondary-foreground: #fafafa;
  --color-muted: #1a1a1a;
  --color-muted-foreground: #a0a0a0;
  --color-accent: #1a1a1a;
  --color-accent-foreground: #fafafa;
  --color-destructive: #7f1d1d;
  --color-destructive-foreground: #fafafa;
  --color-border: #262626;
  --color-input: #262626;
  --color-ring: #8b0000;
  --radius: 0.5rem;

  /* AAA Enhancement: Extended color palette */
  --color-card-elevated: #1a1a1a;
  --color-card-sunken: #0d0d0d;
  --color-primary-glow: rgba(139, 0, 0, 0.4);
  --color-success: #22c55e;
  --color-success-muted: rgba(34, 197, 94, 0.15);
  --color-warning: #eab308;
  --color-warning-muted: rgba(234, 179, 8, 0.15);
  --color-gold: #d4af37;
  --color-gold-muted: rgba(212, 175, 55, 0.2);

  /* Layout spacing for bottom nav clearance */
  --bottom-nav-height: 80px;
  --bottom-nav-clearance: 112px; /* nav height + safe area padding */
}

/* ============================================
   LAYOUT CONVENTIONS
   ============================================
   Bottom padding values:
   - pb-28 (112px): Standard content clearance for bottom nav
   - pb-32 (128px): Extended clearance for content with FAB
   Bottom nav is ~80px + safe area inset
   ============================================ */

/* ============================================
   BORDER RADIUS CONVENTIONS
   ============================================
   rounded-lg (12px): Standard cards, containers, inputs
   rounded-xl (16px): Buttons, prominent UI elements
   rounded-2xl (20px): Large cards, modals
   rounded-full: Avatars, pills, circular buttons
   ============================================ */

/* iOS Safe Area Support */
.safe-area-inset {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

.safe-area-top {
  padding-top: calc(env(safe-area-inset-top) + 16px);
}

.safe-area-bottom {
  padding-bottom: calc(env(safe-area-inset-bottom) + 16px);
}

/* Scrollable container with fade indicators */
.scroll-fade-x {
  position: relative;
  mask-image: linear-gradient(
    to right,
    transparent,
    black 16px,
    black calc(100% - 16px),
    transparent
  );
  -webkit-mask-image: linear-gradient(
    to right,
    transparent,
    black 16px,
    black calc(100% - 16px),
    transparent
  );
}

.type-hero {
  @apply text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-black leading-tight;
}

.type-title {
  @apply text-xl sm:text-2xl font-black tracking-tight;
}

.type-body {
  font-size: 1rem;
  line-height: 1.5;
}

.type-meta {
  font-size: 0.75rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
}

/* ============================================
   UI Token Normalization
   Keeps older white/black utility usage visually aligned
   with the design token system across all ScreenShell views.
   ============================================ */
.ui-tokenized [class~="text-white"] {
  color: var(--color-foreground);
}

.ui-tokenized [class*="text-white/"] {
  color: color-mix(in oklab, var(--color-foreground) 70%, transparent);
}

.ui-tokenized [class~="bg-black"] {
  background-color: var(--color-background);
}

.ui-tokenized [class*="bg-white/"] {
  background-color: color-mix(in oklab, var(--color-card) 72%, transparent);
}

.ui-tokenized [class*="border-white/"] {
  border-color: color-mix(in oklab, var(--color-border) 88%, transparent);
}

.ui-tokenized [class*="from-black"] {
  --tw-gradient-from: color-mix(in oklab, var(--color-background) 95%, transparent) var(--tw-gradient-from-position);
}

.ui-tokenized [class*="via-black"] {
  --tw-gradient-via: color-mix(in oklab, var(--color-background) 88%, transparent) var(--tw-gradient-via-position);
}

.ui-tokenized [class*="to-black"] {
  --tw-gradient-to: color-mix(in oklab, var(--color-background) 95%, transparent) var(--tw-gradient-to-position);
}

/* ============================================
   TYPOGRAPHY SCALE (from design-tokens)
   ============================================ */
.type-xs { font-size: 0.75rem; line-height: 1rem; }
.type-sm { font-size: 0.875rem; line-height: 1.25rem; }
.type-base { font-size: 1rem; line-height: 1.5rem; }
.type-lg { font-size: 1.125rem; line-height: 1.75rem; }
.type-xl { font-size: 1.25rem; line-height: 1.75rem; }
.type-2xl { font-size: 1.5rem; line-height: 2rem; }
.type-3xl { font-size: 1.875rem; line-height: 2.25rem; }
.type-4xl { font-size: 2.25rem; line-height: 2.5rem; }

@keyframes weight-bump {
  0% {
    transform: scale(1);
  }
  40% {
    transform: scale(1.04);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes button-pulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.98);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes check-pop {
  0% {
    transform: scale(0.6);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}


@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.animate-spin {
  animation: spin 1s linear infinite;
}

.animate-in {
  animation-duration: 200ms;
  animation-fill-mode: both;
}

.fade-in {
  animation-name: fade-in;
}

.zoom-in-95 {
  animation-name: zoom-in-95;
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes countdown-pulse {
  0% {
    transform: scale(0.5);
    opacity: 0;
  }
  30% {
    transform: scale(1.15);
    opacity: 1;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes slide-down {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes zoom-in-95 {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* ============================================
   SCREEN TRANSITION ANIMATIONS
   ============================================
   Paired animations for screen navigation:
   - slide-in-right/slide-out-left: Forward navigation
   - slide-in-left/slide-out-right: Back navigation
   Duration: 200ms for consistent feel
   ============================================ */
@keyframes slide-in-right {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slide-out-left {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(-30%);
    opacity: 0;
  }
}

@keyframes slide-in-left {
  from {
    transform: translateX(-30%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slide-out-right {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}

.screen-enter {
  animation: slide-in-right 200ms ease-out forwards;
}

.screen-exit {
  animation: slide-out-left 200ms ease-in forwards;
}

.screen-enter-back {
  animation: slide-in-left 200ms ease-out forwards;
}

.screen-exit-back {
  animation: slide-out-right 200ms ease-in forwards;
}

/* Difficulty Colors */
.difficulty-beginner {
  color: #8b0000;
  background-color: rgba(139, 0, 0, 0.12);
}

.difficulty-intermediate {
  color: #d4af37;
  background-color: rgba(212, 175, 55, 0.18);
}

.difficulty-advanced {
  color: #c41e3a;
  background-color: rgba(196, 30, 58, 0.2);
}

/* Scrollbar Hide */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Skeleton Animation */
@keyframes skeleton-pulse {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.7;
  }
}

.animate-skeleton {
  animation: skeleton-pulse 1.5s ease-in-out infinite;
}

/* Celebration Animation */
@keyframes celebration-pop {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.animate-celebration {
  animation: celebration-pop 400ms ease-out forwards;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ============================================
   AAA QUALITY ENHANCEMENTS
   ============================================ */

/* Elevated Card - for featured/highlighted content */
.card-elevated {
  background: linear-gradient(145deg, #1a1a1a 0%, #141414 100%);
  box-shadow:
    0 4px 20px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.03);
}

/* Glass Card - for overlays and modals */
.card-glass {
  background: rgba(20, 20, 20, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

/* Primary Glow Effect */
.glow-primary {
  box-shadow:
    0 0 20px var(--color-primary-glow),
    0 0 40px rgba(139, 0, 0, 0.2);
}

.glow-primary-subtle {
  box-shadow: 0 0 30px var(--color-primary-glow);
}

/* Gold Glow for achievements/streaks */
.glow-gold {
  box-shadow:
    0 0 20px var(--color-gold-muted),
    0 0 40px rgba(212, 175, 55, 0.15);
}

/* Streak Ring Animation */
@keyframes streak-ring-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 0.6;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.9;
  }
}

@keyframes streak-glow {
  0%, 100% {
    box-shadow: 0 0 20px var(--color-gold-muted);
  }
  50% {
    box-shadow: 0 0 40px var(--color-gold-muted), 0 0 60px rgba(212, 175, 55, 0.2);
  }
}

.animate-streak-pulse {
  animation: streak-ring-pulse 3s ease-in-out infinite;
}

.animate-streak-glow {
  animation: streak-glow 2s ease-in-out infinite;
}

/* Card Press Animation */
@keyframes card-press {
  0% { transform: scale(1); }
  50% { transform: scale(0.98); }
  100% { transform: scale(1); }
}

.card-interactive {
  transition: all 150ms ease-out;
}

.card-interactive:active {
  transform: scale(0.98);
}

/* Stagger Animation for Lists */
@keyframes stagger-fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.stagger-item {
  animation: stagger-fade-in 300ms ease-out forwards;
  opacity: 0;
}

.stagger-item:nth-child(1) { animation-delay: 0ms; }
.stagger-item:nth-child(2) { animation-delay: 50ms; }
.stagger-item:nth-child(3) { animation-delay: 100ms; }
.stagger-item:nth-child(4) { animation-delay: 150ms; }
.stagger-item:nth-child(5) { animation-delay: 200ms; }
.stagger-item:nth-child(6) { animation-delay: 250ms; }
.stagger-item:nth-child(7) { animation-delay: 300ms; }
.stagger-item:nth-child(8) { animation-delay: 350ms; }

/* Progress Ring */
.progress-ring {
  transform: rotate(-90deg);
  transform-origin: 50% 50%;
}

.progress-ring-circle {
  transition: stroke-dashoffset 400ms ease-out;
}

/* Number Counter Animation */
@keyframes number-pop {
  0% {
    transform: scale(1);
  }
  30% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
  }
}

.animate-number-pop {
  animation: number-pop 300ms ease-out;
}

/* Section Divider */
.section-divider {
  height: 1px;
  background: linear-gradient(90deg, transparent 0%, var(--color-border) 50%, transparent 100%);
}

/* Gradient Text */
.text-gradient-gold {
  background: linear-gradient(135deg, #d4af37 0%, #f5d77a 50%, #d4af37 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.text-gradient-primary {
  background: linear-gradient(135deg, #8b0000 0%, #c41e3a 50%, #8b0000 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Breathing Animation for CTAs */
@keyframes breathe {
  0%, 100% {
    box-shadow: 0 0 0 0 var(--color-primary-glow);
  }
  50% {
    box-shadow: 0 0 0 8px transparent;
  }
}

.animate-breathe {
  animation: breathe 2.5s ease-in-out infinite;
}

/* Success Checkmark Animation */
@keyframes checkmark-draw {
  0% {
    stroke-dashoffset: 24;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

.animate-checkmark {
  stroke-dasharray: 24;
  stroke-dashoffset: 24;
  animation: checkmark-draw 300ms ease-out forwards;
  animation-delay: 100ms;
}

/* Ripple Effect */
@keyframes ripple {
  0% {
    transform: scale(0);
    opacity: 0.5;
  }
  100% {
    transform: scale(2.5);
    opacity: 0;
  }
}

.ripple-container {
  position: relative;
  overflow: hidden;
}

/* Floating Label Animation */
@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-4px);
  }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

/* Shimmer Effect for Loading */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.shimmer {
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.05) 50%,
    transparent 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* Subtle Border Glow */
.border-glow {
  position: relative;
}

.border-glow::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  background: linear-gradient(135deg, var(--color-primary) 0%, transparent 50%, var(--color-primary) 100%);
  opacity: 0.3;
  z-index: -1;
}

/* Focus Ring Enhancement */
.focus-ring:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px var(--color-background), 0 0 0 4px var(--color-primary);
}
